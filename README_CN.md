# æ¸¸æˆæœåŠ¡å™¨ç›‘æ§é¢æ¿

ä¸­æ–‡æ–‡æ¡£ | [English](README.md)

ä¸€ä¸ªç°ä»£åŒ–çš„ Web åº”ç”¨ç¨‹åºï¼Œç”¨äºå®æ—¶ç›‘æ§ Minecraft å’Œ CS2 æ¸¸æˆæœåŠ¡å™¨çŠ¶æ€ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ® **å¤šåè®®æ”¯æŒ** - æ”¯æŒ Minecraft å’Œ CS2 æœåŠ¡å™¨ç›‘æ§
- ğŸ“Š **å®æ—¶ç›‘æ§** - è‡ªåŠ¨æ¢æµ‹æœåŠ¡å™¨çŠ¶æ€ï¼Œå®æ—¶æ›´æ–°
- ğŸ¨ **ç°ä»£åŒ–ç•Œé¢** - ç²¾ç¾çš„ Slate ä¸»é¢˜è®¾è®¡ï¼Œå“åº”å¼å¸ƒå±€
- ğŸ” **å®‰å…¨çš„ç®¡ç†åå°** - åŸºäº JWT çš„èº«ä»½è®¤è¯å’Œå¯†ç ç®¡ç†
- ğŸ“ **Markdown æ”¯æŒ** - æœåŠ¡å™¨æè¿°æ”¯æŒ Markdown æ ¼å¼
- ğŸš€ **å•æ–‡ä»¶éƒ¨ç½²** - å‰ç«¯åµŒå…¥ Go äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œéƒ¨ç½²ç®€å•
- âš¡ **é«˜æ€§èƒ½** - ä½¿ç”¨ Go å’Œ React æ„å»ºï¼Œæ€§èƒ½ä¼˜å¼‚
- ğŸ”„ **è‡ªåŠ¨åˆ·æ–°** - å¯é…ç½®çš„è‡ªåŠ¨çŠ¶æ€æ›´æ–°

## æŠ€æœ¯æ ˆ

### åç«¯
- **Go 1.21+** - é«˜æ€§èƒ½ç³»ç»Ÿè¯­è¨€
- **Gin Framework** - è½»é‡çº§ HTTP Web æ¡†æ¶
- **GORM + SQLite** - ORM å’ŒåµŒå…¥å¼æ•°æ®åº“
- **JWT** - èº«ä»½è®¤è¯
- **åè®®åº“**:
  - `github.com/xrjr/mcutils` - Minecraft åè®®
  - `github.com/rumblefrog/go-a2s` - Source Query åè®®

### å‰ç«¯
- **React 18** - ç”¨æˆ·ç•Œé¢åº“
- **TypeScript** - ç±»å‹å®‰å…¨
- **Tailwind CSS v4** - ç°ä»£åŒ– CSS æ¡†æ¶
- **Zustand** - çŠ¶æ€ç®¡ç†
- **React Router** - è·¯ç”±ç®¡ç†
- **Axios** - HTTP å®¢æˆ·ç«¯
- **Vite** - æ„å»ºå·¥å…·

## é¡¹ç›®ç»“æ„

```
game-server-monitor/
â”œâ”€â”€ main.go                     # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ go.mod                      # Go æ¨¡å—å®šä¹‰
â”œâ”€â”€ build.sh                    # ç”Ÿäº§æ„å»ºè„šæœ¬
â”œâ”€â”€ dev.sh                      # å¼€å‘ç¯å¢ƒè„šæœ¬
â”œâ”€â”€ internal/                   # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ database/               # æ•°æ®åº“å±‚
â”‚   â”œâ”€â”€ handlers/               # HTTP å¤„ç†å™¨
â”‚   â”œâ”€â”€ auth/                   # èº«ä»½è®¤è¯
â”‚   â”œâ”€â”€ middleware/             # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ prober/                 # æœåŠ¡å™¨æ¢æµ‹æœåŠ¡
â”‚   â””â”€â”€ cache/                  # ç¼“å­˜å±‚
â””â”€â”€ frontend/                   # å‰ç«¯åº”ç”¨
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
    â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
    â”‚   â”œâ”€â”€ stores/             # Zustand çŠ¶æ€ç®¡ç†
    â”‚   â”œâ”€â”€ services/           # API æœåŠ¡
    â”‚   â””â”€â”€ types/              # TypeScript ç±»å‹å®šä¹‰
    â”œâ”€â”€ package.json
    â””â”€â”€ vite.config.ts
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Go 1.21+
- Node.js 18+
- pnpm (æ¨è) æˆ– npm

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. **å®‰è£…ä¾èµ–**:
   ```bash
   # Go ä¾èµ–
   go mod tidy
   
   # å‰ç«¯ä¾èµ–
   cd frontend
   pnpm install
   cd ..
   ```

2. **é…ç½®ç¯å¢ƒå˜é‡**:
   ```bash
   # å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
   cp .env.example .env
   
   # ç¼–è¾‘ .env æ–‡ä»¶è®¾ç½®ä½ çš„é…ç½®
   # é‡è¦ï¼šç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹ JWT_SECRETï¼
   ```

3. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**:
   ```bash
   ./dev.sh
   ```
   
   è¿™å°†å¯åŠ¨ï¼š
   - å‰ç«¯å¼€å‘æœåŠ¡å™¨: http://localhost:5173
   - åç«¯ API æœåŠ¡å™¨: http://localhost:8080

### ç”Ÿäº§æ„å»º

```bash
./build.sh
```

è¿™å°†ï¼š
1. æ„å»ºå‰ç«¯åº”ç”¨åˆ° `frontend/dist/`
2. å°†å‰ç«¯èµ„æºåµŒå…¥åˆ° Go äºŒè¿›åˆ¶æ–‡ä»¶ä¸­
3. ç”Ÿæˆå•ä¸€å¯æ‰§è¡Œæ–‡ä»¶ `game-server-monitor`

### è¿è¡Œç”Ÿäº§ç‰ˆæœ¬

```bash
./game-server-monitor
```

åº”ç”¨ç¨‹åºå°†åœ¨ http://localhost:8080 ä¸Šè¿è¡Œ

### éƒ¨ç½²

#### ä½¿ç”¨ Systemdï¼ˆLinuxï¼‰

1. å¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶å¹¶åˆ›å»ºå¿…è¦çš„ç›®å½•ï¼š
   ```bash
   sudo mkdir -p /opt/game-server-monitor
   sudo cp game-server-monitor /opt/game-server-monitor/
   sudo cp .env.example /opt/game-server-monitor/.env
   ```

2. ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š
   ```bash
   sudo nano /opt/game-server-monitor/.env
   # è®¾ç½®ä½ çš„ JWT_SECRET å’Œå…¶ä»–é…ç½®
   ```

3. åˆ›å»º systemd æœåŠ¡ï¼š
   ```bash
   sudo cp game-server-monitor.service.example /etc/systemd/system/game-server-monitor.service
   sudo nano /etc/systemd/system/game-server-monitor.service
   # æ ¹æ®éœ€è¦æ›´æ–°è·¯å¾„å’Œç¯å¢ƒå˜é‡
   ```

4. å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡ï¼š
   ```bash
   sudo systemctl daemon-reload
   sudo systemctl enable game-server-monitor
   sudo systemctl start game-server-monitor
   sudo systemctl status game-server-monitor
   ```

#### ä½¿ç”¨ Dockerï¼ˆå³å°†æ¨å‡ºï¼‰

Docker æ”¯æŒè®¡åˆ’åœ¨æœªæ¥ç‰ˆæœ¬ä¸­æä¾›ã€‚

## é»˜è®¤è´¦å·

**ç”¨æˆ·å**: `admin`  
**å¯†ç **: `admin123`

âš ï¸ **é‡è¦æç¤º**: é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

## ä½¿ç”¨è¯´æ˜

### æ·»åŠ æœåŠ¡å™¨

1. ç™»å½•ç®¡ç†åå°
2. ç‚¹å‡»"æ·»åŠ æ–°æœåŠ¡å™¨"æŒ‰é’®
3. å¡«å†™æœåŠ¡å™¨ä¿¡æ¯ï¼š
   - æœåŠ¡å™¨åç§°
   - æ¸¸æˆç±»å‹ï¼ˆMinecraft æˆ– CS2ï¼‰
   - æœåŠ¡å™¨åœ°å€å’Œç«¯å£
   - æœåŠ¡å™¨æè¿°ï¼ˆæ”¯æŒ Markdown æ ¼å¼ï¼‰
4. ç‚¹å‡»"ä¿å­˜"

### ç›‘æ§æœåŠ¡å™¨

- åœ¨é¦–é¡µæŸ¥çœ‹æ‰€æœ‰æœåŠ¡å™¨
- å®æ—¶çŠ¶æ€æ›´æ–°ï¼ˆåœ¨çº¿/ç¦»çº¿ï¼‰
- ç©å®¶æ•°é‡å’ŒæœåŠ¡å™¨å®¹é‡
- å“åº”å»¶è¿Ÿ
- ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"äº†è§£æ›´å¤šä¿¡æ¯

### ç®¡ç†æœåŠ¡å™¨

- ç¼–è¾‘æœåŠ¡å™¨ä¿¡æ¯
- åˆ é™¤æœåŠ¡å™¨
- ä¿®æ”¹ç®¡ç†å‘˜å¯†ç 
- æŸ¥çœ‹æœåŠ¡å™¨ç»Ÿè®¡ä¿¡æ¯

## API æ¥å£

### å…¬å…±æ¥å£
- `GET /api/servers` - è·å–æ‰€æœ‰æœåŠ¡å™¨åŠçŠ¶æ€
- `GET /api/servers/:id` - è·å–ç‰¹å®šæœåŠ¡å™¨è¯¦æƒ…
- `POST /api/auth/login` - ç®¡ç†å‘˜ç™»å½•

### å—ä¿æŠ¤æ¥å£ï¼ˆéœ€è¦ JWTï¼‰
- `GET /api/auth/profile` - è·å–ç”¨æˆ·ä¿¡æ¯
- `POST /api/auth/change-password` - ä¿®æ”¹å¯†ç 
- `POST /api/auth/validate` - éªŒè¯ä»¤ç‰Œ

### ç®¡ç†æ¥å£ï¼ˆéœ€è¦ JWTï¼‰
- `GET /api/admin/servers` - è·å–æ‰€æœ‰æœåŠ¡å™¨ï¼ˆç®¡ç†è§†å›¾ï¼‰
- `POST /api/admin/servers` - åˆ›å»ºæ–°æœåŠ¡å™¨
- `PUT /api/admin/servers/:id` - æ›´æ–°æœåŠ¡å™¨
- `DELETE /api/admin/servers/:id` - åˆ é™¤æœåŠ¡å™¨
- `POST /api/admin/users` - åˆ›å»ºç”¨æˆ·
- `GET /api/admin/users` - åˆ—å‡ºç”¨æˆ·
- `DELETE /api/admin/users/:id` - åˆ é™¤ç”¨æˆ·
- `POST /api/admin/users/:id/reset-password` - é‡ç½®ç”¨æˆ·å¯†ç 

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ã€‚å¤åˆ¶ `.env.example` åˆ° `.env` å¹¶æ ¹æ®éœ€è¦ä¿®æ”¹ï¼š

```bash
cp .env.example .env
```

å¯ç”¨çš„ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | æ˜¯å¦å¿…éœ€ |
|--------|------|--------|----------|
| `PORT` | HTTP æœåŠ¡å™¨ç›‘å¬ç«¯å£ | `8080` | å¦ |
| `JWT_SECRET` | JWT ä»¤ç‰Œç­¾åå¯†é’¥ | `bWHnEE0TtwPZvbspvsfb` | **æ˜¯ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰** |
| `GIN_MODE` | Gin æ¡†æ¶æ¨¡å¼ï¼ˆ`debug` æˆ– `release`ï¼‰ | `debug` | å¦ |

**âš ï¸ å®‰å…¨è­¦å‘Š**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ `JWT_SECRET`ï¼è¯·ä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²ã€‚

ç”Ÿæˆå®‰å…¨çš„ JWT å¯†é’¥ï¼š
```bash
# ä½¿ç”¨ openssl
openssl rand -base64 32

# ä½¿ç”¨ Go
go run -c 'package main; import ("crypto/rand"; "encoding/base64"; "fmt"); func main() { b := make([]byte, 32); rand.Read(b); fmt.Println(base64.StdEncoding.EncodeToString(b)) }'
```

### æœåŠ¡å™¨æ¢æµ‹

åº”ç”¨ç¨‹åºæ¯ 30 ç§’è‡ªåŠ¨æ¢æµ‹ä¸€æ¬¡æœåŠ¡å™¨ã€‚å¯åœ¨ `internal/prober/prober.go` ä¸­é…ç½®ã€‚

### é€Ÿç‡é™åˆ¶

API æ¥å£é™åˆ¶ä¸ºæ¯ä¸ª IP åœ°å€æ¯ 10 ç§’æœ€å¤š 20 ä¸ªè¯·æ±‚ã€‚å¯åœ¨ `main.go` ä¸­é…ç½®ã€‚

### JWT ä»¤ç‰Œ

JWT ä»¤ç‰Œæœ‰æ•ˆæœŸä¸º 24 å°æ—¶ã€‚å¯åœ¨ `internal/auth/jwt.go` ä¸­é…ç½®ã€‚

## å¼€å‘æŒ‡å—

### è¿è¡Œæµ‹è¯•

```bash
# åç«¯æµ‹è¯•
go test ./...

# å‰ç«¯æµ‹è¯•
cd frontend
pnpm test
```

### ä»£ç ç»“æ„

- **å¤„ç†å™¨**: HTTP è¯·æ±‚å¤„ç†å™¨ä½äº `internal/handlers/`
- **æ¨¡å‹**: æ•°æ®æ¨¡å‹ä½äº `internal/models/`
- **æ•°æ®åº“**: æ•°æ®åº“æ“ä½œä½äº `internal/database/`
- **æ¢æµ‹å™¨**: æœåŠ¡å™¨æ¢æµ‹é€»è¾‘ä½äº `internal/prober/`
- **è®¤è¯**: èº«ä»½è®¤è¯å’Œ JWT ä½äº `internal/auth/`
- **å‰ç«¯**: React åº”ç”¨ä½äº `frontend/src/`

## å¸¸è§é—®é¢˜

### æœåŠ¡å™¨æ— å“åº”

- æ£€æŸ¥æœåŠ¡å™¨åœ°å€å’Œç«¯å£æ˜¯å¦æ­£ç¡®
- ç¡®ä¿æœåŠ¡å™¨å·²å¯ç”¨æŸ¥è¯¢åè®®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### ç™»å½•é—®é¢˜

- éªŒè¯è´¦å·å¯†ç 
- æ£€æŸ¥ JWT ä»¤ç‰Œæ˜¯å¦è¿‡æœŸ
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åé‡è¯•

### æ„å»ºé—®é¢˜

- ç¡®ä¿æ‰€æœ‰ä¾èµ–å·²å®‰è£…
- æ£€æŸ¥ Go å’Œ Node.js ç‰ˆæœ¬
- è¿è¡Œ `go mod tidy` å’Œ `pnpm install`

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚

## è®¸å¯è¯

MIT License

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–ç–‘é—®ï¼Œè¯·åœ¨ GitHub ä¸Šæäº¤ issueã€‚
